+++
title = "Import a SANS VM to Proxmox"
date = "2023-03-20T00:00:00Z"
tags = [ "proxmox", "sans", "grem", "vmware" ]
categories = [ "lab" ]
+++


SANS virtual machines are delivered in the VMWare machine format. To migrate a VM built as such to Proxmox, you must first upload it to the server via SFTP and then import it to a new VM with the *qm* command-line tool.

Firstly, open the VM image with VMWare Workstation on your local machine. In the case of FOR610, I started with a VMDK file *Virtual Disk.vmdk* and a *REMnuxVM.vmx* file. After opening up the *REMnuxVM.vmx* file, I then clicked on **File > Export to OVF**.

![ExportToOVF](/images/posts/ExportToOVF.png)


The following files were then available to me in the VM directory.

![REMnux_files](/images/posts/REMnux_files.png)


Start [Cyberduck](https://cyberduck.io) and configure an SFTP connection to the Proxmox server. **Note that you must have a local user account on the Proxmox server!**

Navigate to a directory to store your VM (in my case, I navigated to an NFS mount at */mnt/pve/sans-iso/vmware-imports*)*  . Drag-and-drop your VM files.

In a shell on the Proxmox server (accessible via the web interface), navigate to the directory created. 

Next, create a new VM from the image with the command:

```
qm importovf <VM ID> <OVF file> <storage pool> 
```

In the case of FOR610, I ran the following commands to import one of the VMs given:

```
qm importovf 203 RemnuxVM.ovf t420-iso
```

After importing the VMs, stop them (if started) and convert them to a template by right-clicking on the VM's entry in the left-hand nav-bar and selecting the appropriate option. This will allow you to generate new VMs in the future from that template that can be utilized and then discarded without affecting the base image!

